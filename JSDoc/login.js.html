<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: login.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: login.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Handles client login functionality.
 * @function clientLogin
 */
$(clientAccess).click(function() {

    // Cookie creation for client
    let cookieClient = "role=client;";
    document.cookie = cookieClient;

    window.location.href = "index.php?action=home";

});

/**
 * Handles employee login functionality.
 * @function employeeLogin
 */
$(employeeAccess).click(function() {

    // Email and password verification
    $.getJSON("https://dev-plantiv221.users.info.unicaen.fr/bikestores/employees", function(data) {
        for (employee of data) {
            if (employee["employee_email"] == $(email).val() &amp;&amp; employee["employee_password"] == $(pwd).val()) {

                // Cookie creation for employee
                let cookieEmployeeRole = "role=" + employee["employee_role"] + "; SameSite=strict;";
                document.cookie = cookieEmployeeRole;
                let cookieEmployeeId = "id=" + employee["employee_id"] + "; SameSite=strict;";
                document.cookie = cookieEmployeeId;
                let cookieEmployeeStoreId = "storeId=" + employee["store"]["store_id"] + "; SameSite=strict;";
                document.cookie = cookieEmployeeStoreId;
                let cookieEmployeeStoreName = "storeName=" + employee["store"]["store_name"] + "; SameSite=strict;";
                document.cookie = cookieEmployeeStoreName;

                window.location.href = "index.php?action=home";
                return;
            }
        }

        // Error message
        $("#form p").remove();
        let error = $("&lt;p>");
        error.text("Wrong credentials");
        $(form).append(error);

    });

});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addContentToDatabase">addContentToDatabase</a></li><li><a href="global.html#addEmployeeOption">addEmployeeOption</a></li><li><a href="global.html#checkFill">checkFill</a></li><li><a href="global.html#checkFormat">checkFormat</a></li><li><a href="global.html#clientLogin">clientLogin</a></li><li><a href="global.html#deleteContent">deleteContent</a></li><li><a href="global.html#displayItemList">displayItemList</a></li><li><a href="global.html#employeeLogin">employeeLogin</a></li><li><a href="global.html#getCookie">getCookie</a></li><li><a href="global.html#getEmployeesList">getEmployeesList</a></li><li><a href="global.html#getStoreData">getStoreData</a></li><li><a href="global.html#getUserLocation">getUserLocation</a></li><li><a href="global.html#initializeMap">initializeMap</a></li><li><a href="global.html#selectItemChange">selectItemChange</a></li><li><a href="global.html#selectStoreChange">selectStoreChange</a></li><li><a href="global.html#selectTypeChange">selectTypeChange</a></li><li><a href="global.html#singular">singular</a></li><li><a href="global.html#sortTable">sortTable</a></li><li><a href="global.html#storeData">storeData</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Thu Apr 18 2024 16:39:57 GMT+0200 (heure d’été d’Europe centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
